<!DOCTYPE html>
<html lang="en">
  <head>
        <title>CMPUT 301 - Class Participation Exercise 2020-04-08 Refactoring</title>
      <meta charset="utf-8" />
      <meta name="generator" content="Pelican" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Software Engineering" />
        <link href="https://ualberta-cmput301.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="CMPUT 301 Full Atom Feed" />
        <link href="https://ualberta-cmput301.github.io/feeds/archive.atom.xml" type="application/atom+xml" rel="alternate" title="CMPUT 301 Categories Atom Feed" />

  <link rel="icon" href="https://ualberta-cmput301.github.io/theme/favicon.png" />
  <link rel="stylesheet" type="text/css" href="https://ualberta-cmput301.github.io/theme/style.css" />
  <link rel="stylesheet" type="text/css" href="https://ualberta-cmput301.github.io/theme/301.css" />




    <meta name="tags" content="resources" />
    <meta name="tags" content="reading" />
    <meta name="tags" content="references" />
    <meta name="tags" content="practice" />

  </head>

  <body>
      <header>
          <hgroup><h1><a href="https://ualberta-cmput301.github.io/">CMPUT 301</a></h1><p>Software Engineering</p></hgroup>
          <nav><ul>
              <li><a href="/general/outline.html">Outline</a></li>
              <li><a href="/#canvas">Canvas & Grades</a></li>
              <li><a href="/#schedule">Schedule</a></li>
              <li><a href="/general/labs.html">Labs</a></li>
              <li><a href="/general/project.html">Project</a></li>
              <li><a href="/general/individual.html">Individual</a></li>
              <li><a href="/general/resources.html">Resources</a></li>
              <li><a href="/general/help.html#discussion-forum">Discussion Forum</a></li>
              <li><a href="/#news-notices">News & Notices</a></li>
              <li><a href="/general/slides.html">Slides</a></li>
              <li><a href="/general/help.html">Help</a></li>
                <li><a href="https://ualberta-cmput301.github.io/" >Home</a></li>
          </ul></nav>
      </header>
      <main>
  <article>
    <header>
      <h2>
        <a href="https://ualberta-cmput301.github.io/archive/class_participation_exer_20200408_Refactoring.html" rel="bookmark"
           title="Permalink to Class Participation Exercise 2020-04-08 Refactoring">Class Participation Exercise 2020-04-08 Refactoring</a></h2>
      
    </header>
    <hr>
<p><strong>License</strong>  </p>
<p>Copyright 2012 Neil Borle, Mitchell Home, Bronte Lee, Aaron Padlesky, Eddie Santos   <br>
Licensed under the Apache License, Version 2.0 (the “License”); you may not use this file except in compliance with the License.  <br>
You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0  </p>
<p>Unless required by applicable law or agreed to in writing, software distributed under the License is distributed on an “AS IS” BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.<br>
See the License for the specific language governing permissions and limitations under the License. </p>
<p><strong>Class Participation Exercise: Refactoring</strong></p>
<div style="text-align: center; margin: 20px;">
    <img src="https://ualberta-cmput301.github.io/archive/exer20200408refactoring.png" alt="Participation Exercise Image" style="width: 800px;">
</div>

<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ResponseObtainerObtainer</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="n">ResponseObtainer</span><span class="w"> </span><span class="nf">getResponseObtainer</span><span class="p">(</span>
<span class="w">            </span><span class="n">MediaType</span><span class="w"> </span><span class="n">media</span><span class="p">,</span><span class="w"> </span><span class="n">LayoutInflater</span><span class="w"> </span><span class="n">inflater</span><span class="p">,</span>
<span class="w">            </span><span class="n">ViewGroup</span><span class="w"> </span><span class="n">root</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">ResponseObtainer</span><span class="w"> </span><span class="n">obtainer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">layout_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="w">        </span><span class="n">ViewGroup</span><span class="w"> </span><span class="n">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">        </span><span class="n">Class</span><span class="o">&lt;?</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">ResponseObtainer</span><span class="o">&gt;</span><span class="w"> </span><span class="n">obtainerClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>

<span class="w">        </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">media</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">TEXT</span><span class="p">:</span>
<span class="w">                </span><span class="n">layout_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">fragment_fulfill_text</span><span class="p">;</span>
<span class="w">                </span><span class="n">obtainerClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TextResponseObtainer</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">AUDIO</span><span class="p">:</span>
<span class="w">                </span><span class="n">layout_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">fragment_fulfill_audio</span><span class="p">;</span>
<span class="w">                </span><span class="n">obtainerClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">AudioResponseObtainer</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">case</span><span class="w"> </span><span class="n">PHOTO</span><span class="p">:</span>
<span class="w">                </span><span class="n">layout_id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">R</span><span class="p">.</span><span class="na">layout</span><span class="p">.</span><span class="na">fragment_fulfill_photo</span><span class="p">;</span>
<span class="w">                </span><span class="n">obtainerClass</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">PhotoResponseObtainer</span><span class="p">.</span><span class="na">class</span><span class="p">;</span>
<span class="w">                </span><span class="k">break</span><span class="p">;</span>
<span class="w">            </span><span class="k">default</span><span class="p">:</span>
<span class="w">                </span><span class="c1">// err....</span>
<span class="w">                </span><span class="c1">// TODO: Give an error response obtainer?</span>
<span class="w">        </span><span class="p">}</span>

<span class="w">        </span><span class="n">view</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">ViewGroup</span><span class="p">)</span><span class="w"> </span><span class="n">inflater</span><span class="p">.</span><span class="na">inflate</span><span class="p">(</span><span class="n">layout_id</span><span class="p">,</span><span class="w"> </span><span class="n">root</span><span class="p">);</span>
<span class="w">        </span><span class="n">obtainer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">obtainerClass</span><span class="p">.</span><span class="na">getConstructor</span><span class="p">(</span><span class="n">ViewGroup</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                    </span><span class="p">.</span><span class="na">newInstance</span><span class="p">(</span><span class="n">view</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">obtainer</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>

<p>List 1: Code Smell</p>
<p>Evident in this code:</p>
<ul>
<li>
<p>Propose or draw a refactoring for this code.</p>
</li>
<li>
<p>Why would a MediaType (TEXT, AUDIO, PHOTO) still be necessary after a refactoring?</p>
</li>
</ul>
    <footer>
      <p>Published: <time datetime="2024-09-17T00:00:00-06:00">
        Tue, 17 Sep 2024 at 00:00 MDT
      </time></p>
        <address>
          By             <a href="https://ualberta-cmput301.github.io/author/neil-borle.html">Neil Borle</a>
            <a href="https://ualberta-cmput301.github.io/author/mitchell-home.html">Mitchell Home</a>
            <a href="https://ualberta-cmput301.github.io/author/bronte-lee.html">Bronte Lee</a>
            <a href="https://ualberta-cmput301.github.io/author/aaron-padlesky.html">Aaron Padlesky</a>
            <a href="https://ualberta-cmput301.github.io/author/eddie-santos.html">Eddie Santos</a>
            <a href="https://ualberta-cmput301.github.io/author/hazel-victoria-campbell.html">Hazel Victoria Campbell</a>
            <a href="https://ualberta-cmput301.github.io/author/tina-nguyen.html">Tina Nguyen</a>
        </address>
        <p>
          Category: <a href="https://ualberta-cmput301.github.io/category/archive.html">archive</a>
        </p>
        <p>
          Tags:
            <a href="https://ualberta-cmput301.github.io/tag/resources.html">resources</a>
            <a href="https://ualberta-cmput301.github.io/tag/reading.html">reading</a>
            <a href="https://ualberta-cmput301.github.io/tag/references.html">references</a>
            <a href="https://ualberta-cmput301.github.io/tag/practice.html">practice</a>
        </p>
    </footer>
  </article>
      </main>
      <footer>
          <address>
            Proudly powered by <a rel="nofollow" href="https://getpelican.com/">Pelican</a>,
            which takes great advantage of <a rel="nofollow" href="https://www.python.org/">Python</a>.
          </address>
      </footer>
  </body>
</html>